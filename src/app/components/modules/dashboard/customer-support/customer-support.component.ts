import { Component, OnInit } from '@angular/core';
import { MessageService } from './message.service';
import {
  SupportAssignment,
  SupportMessage,
} from '../../../../@core/models/data-objects';
import { AuthService } from '../../../../@core/services/auth/auth.service';
import { CustomerSupportService } from './customer-support.service';
import { Observable } from 'rxjs';

interface Captain {
  name: string;
  problem: string;
  image: string;
}

@Component({
  selector: 'app-customer-support',
  templateUrl: './customer-support.component.html',
  styleUrls: ['./customer-support.component.scss'],
})
export class CustomerSupportComponent implements OnInit {
  captains: Array<Captain> = [
    {
      name: 'ahmed ali',
      problem: 'delivary problem',
      image: 'https://www.seu.edu.sa/images/avatar.png',
    },
    {
      name: 'abdelrahman fawzy',
      problem: 'bad order',
      image:
        'data:image/jpeg;base64,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',
    },
    {
      name: 'mohammed mahmoad',
      problem: 'no payment',
      image:
        'data:image/jpeg;base64,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',
    },
    {
      name: 'ahmed ali',
      problem: 'delivary problem',
      image:
        'https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcRr3qBVX4XIA8zq3LpBn64zAuOt9_IZ7_H5uA&usqp=CAU',
    },
    {
      name: 'rana talaat',
      problem: 'receving problem',
      image:
        'data:image/jpeg;base64,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',
    },
  ];

  supportAssignment$: Observable<SupportAssignment[]>;
  currentSupportAssignId: number = -1;
  messages = new Array<SupportMessage>();
  //message = new Message();
  constructor(
    private messageService: MessageService,
    private authService: AuthService,
    private CSS: CustomerSupportService
  ) {}

  ngOnInit(): void {
    this.messageService.registerOnNewMessageServerEvents();
    this.messageService.registerOnNewSupportRequestServerEvents();

    this.subscribeToNewMessageReceivedEvents();
    this.subscribeToNewRequestReceivedEvents();
    this.loadAllSupportAssigned();
  }

  submit(message: HTMLInputElement) {
    console.log(message.value);

    let supportMessage: SupportMessage = new SupportMessage();
    supportMessage.isUser = false;
    supportMessage.message = message.value;
    supportMessage.supportAssignId = this.currentSupportAssignId;
    supportMessage.createdBy = this.authService.getLoggedUser().supportUserId;

    this.CSS.sendMessage(supportMessage).subscribe((data) => {
      if (data) {
      }
    });

    message.value = '';

    //this.messageService.sendMessage(this.message);
  }

  // sendMessage(): void {
  //   if (this.txtMessage) {
  //     this.message = new Message();
  //     this.message.clientuniqueid = this.uniqueID;
  //     this.message.type = "sent";
  //     this.message.message = this.txtMessage;
  //     this.message.date = new Date();
  //     this.messages.push(this.message);
  //     this.chatService.sendMessage(this.message);
  //     this.txtMessage = '';
  //   }
  // }

  private subscribeToNewMessageReceivedEvents(): void {
    this.messageService.messageReceived.subscribe((message: string) => {
      let supportMessage: SupportMessage = new SupportMessage();
      supportMessage.isUser = true;
      supportMessage.message = message;
      this.messages.push(supportMessage);
    });
  }

  private subscribeToNewRequestReceivedEvents(): void {
    this.messageService.requestReceived.subscribe((message: string) => {
      this.loadAllSupportAssigned();
    });
  }

  private loadAllSupportAssigned(): void {
    this.supportAssignment$ = this.CSS.getAllSupportAssigned(
      this.authService.getLoggedUser().supportUserId
    );
  }
}
